<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>Computer Words: How it works</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="stylesheet" href="static/normalize.css" type="text/css" /><link rel="stylesheet" href="static/default.css" type="text/css" /><link rel="stylesheet" href="style.css" type="text/css" /><link rel="stylesheet" href="static/pygments.css" type="text/css" />
    </head>
    <body>
        <header id="pageheader">
            <a class="header-link" href="index.html"><h1>Computer Words <span class="project-version">v1.0a1</span></h1></a>
            <h2>A system for writing and publishing documentation</h2>
            <div id="navheader"><nav class='previous-page'><a href="related_work.html">&larr; Related Work</a></nav><nav class='next-page'><a href="API.html">API &rarr;</a></nav><div style="clear: both;"></div></div>
            <hr>
        </header>
        <main id="pagebody"><article><a href="#How-it-works" name="How-it-works" class='header-anchor'><h1>How it works</h1></a><a href="#Input" name="Input" class='header-anchor'><h2>Input</h2></a><p>First, your files are parsed into a tree called the “Computer Words Document Object Model”, or <code>CWDOM</code>. So this:</p><figure class='code'><figcaption class='filename'>readme.md</figcaption><div class="highlight"><pre><span></span><span class="k"># </span><span class="gh">Title</span>

some text
</pre></div>
</figure><p>becomes this:</p><figure class='image graphviz-graph'><img src='13348fa022bbcb567ed7fd22ce750e988252078deacf680386705d7308582738.svg'></img></figure><a href="#Processing" name="Processing" class='header-anchor'><h2>Processing</h2></a><p>Then we apply a processor library to the graph. A <i>library</i> is a mapping of <code>node_name -&gt; [processor]</code>. A <i>processor</i> is a function like this:</p><figure class='code'><div class="highlight"><pre><span></span><span class="nd">@library.processor</span><span class="p">(</span><span class="s1">&#39;xxx&#39;</span><span class="p">)</span>  <span class="c1"># operate on &#39;xxx&#39; nodes</span>
<span class="k">def</span> <span class="nf">process_xxx</span><span class="p">(</span><span class="n">node_store</span><span class="p">,</span> <span class="n">node</span><span class="p">)</span>
    <span class="c1"># you can mutate the node, its children, or its</span>
    <span class="c1"># ancestors (but not its siblings).</span>
    <span class="c1"># In this case, we are swapping the node in place for</span>
    <span class="c1"># another node, which will have the original node&#39;s</span>
    <span class="c1"># parent and children.</span>
    <span class="n">node_store</span><span class="o">.</span><span class="n">replace_node</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">CWDOMNode</span><span class="p">(</span><span class="s1">&#39;yyy&#39;</span><span class="p">))</span>
</pre></div>
</figure><p>Each node will be processed at least once, in a <i>post-order tree traversal</i> (meaning that a node will be visited before its ancestors). If a node is mutated by another node&#x27;s processor, that node will be marked <i>dirty</i> and its processors will be run again.</p><a href="#Output" name="Output" class='header-anchor'><h2>Output</h2></a><p>The <i>html writer</i> walks the tree and writes HTML.</p></article></main>
        <footer id="pagefooter"><nav class='previous-page'><a href="related_work.html">&larr; Related Work</a></nav><nav class='next-page'><a href="API.html">API &rarr;</a></nav><div style="clear: both;"></div></footer>
    </body>
</html>
